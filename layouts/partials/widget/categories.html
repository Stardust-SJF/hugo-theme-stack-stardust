{{- $context := .Context -}}
{{- $limit := default 10 .Params.limit -}}
<section class="widget category">
    <div class="widget-icon">
        {{ partial "helper/icon" "categories" }}
    </div>
    <h2 class="widget-title section-title">{{ T "widget.categoriesCloud.title" }}</h2>

    <div class="category-label">
        {{ range first $limit $context.Site.Taxonomies.categories.ByCount }}
        <a href="{{ .Page.RelPermalink }}"
           class="font_size_{{ .Count }}"
           style="
             display: table;               /* Make the link behave like a table */
             width: 380px;                 /* Fixed width ensures alignment */
             border-left-color: {{ with .Page.Params.style.background }}{{ . }}{{ else }}#ccc{{ end }};
             filter: saturate(1.7);
             text-decoration: none;        /* optional */
             color: inherit;               /* optional */
           ">
           <span style="
             display: table-cell;
             color: var(--card-text-color-main);
             text-align: left;
             padding-right: 0.5em;         /* optional spacing */
           ">
             {{ .Page.Title }}
           </span>
           <span class="category-count" style="
             display: table-cell;
             text-align: right;
           ">
             {{ .Count }}
           </span>
        </a>
        {{ end }}
    </div>
</section>
